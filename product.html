<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SareeKraft - Product Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="text-gray-700">

  <div id="navbar"></div>

  <script>
  fetch("nav.html")
    .then(res => res.text())
    .then(data => {
      document.getElementById("navbar").innerHTML = data;

      // Re-run scripts inside nav.html
      const scripts = document.querySelectorAll("#navbar script");
      scripts.forEach(script => {
        const newScript = document.createElement("script");
        newScript.textContent = script.textContent;
        document.body.appendChild(newScript);
      });
    });
  </script>

<!-- PRODUCT PAGE -->
<section class="text-gray-600 body-font overflow-hidden">
  <div class="container px-5 py-24 mx-auto">
    <div class="lg:w-4/5 mx-auto flex flex-wrap">

      <!-- LEFT IMAGE -->
      <img id="productImg" 
           class="lg:w-1/2 w-full lg:h-auto h-150 object-cover object-center rounded shadow-lg">

      <!-- RIGHT DETAILS -->
      <div class="lg:w-1/2 w-full lg:pl-10 lg:py-6 mt-6 lg:mt-0">

        <!-- Product Brand / Type -->
        <h2 id="productType" class="text-sm title-font text-gray-500 tracking-widest"></h2>

        <!-- Product Name -->
        <h1 id="productName" class="text-gray-900 text-3xl title-font font-medium mb-2"></h1>

        <!-- Product Code -->
        <h3 id="productCode" class="text-xs text-gray-500"></h3>

        <!-- Stock Badge -->
        <div id="stockBadge" class="my-3"></div>

        <!-- Description -->
        <p id="productDescription" class="leading-relaxed mb-5"></p>

        <!-- Price -->
        <div class="flex items-center">
          <span id="productPrice" class="title-font font-bold text-3xl text-gray-900"></span>
        </div>

        <!-- WhatsApp Buy Button -->
        <a id="whatsappButton"
           target="_blank"
           class="mt-6 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg text-center block">
           Buy Now
        </a>
        <div class="mt-8">
          <table class="w-full text-left border border-gray-200 text-sm">
            <tbody>
              <tr class="bg-gray-50 text-gray-600 uppercase tracking-wide">
                <th class="px-3 py-2 w-1/3">Specification</th>
                <th class="px-3 py-2">Details</th>
              </tr>
              <tr>
                <td class="px-3 py-2 border-t border-gray-200 font-semibold text-gray-600">Fabric type</td>
                <td id="fabricTypeCell" class="px-3 py-2 border-t border-gray-200 text-gray-900"></td>
              </tr>
              <tr>
                <td class="px-3 py-2 border-t border-gray-200 font-semibold text-gray-600">Length</td>
                <td id="lengthCell" class="px-3 py-2 border-t border-gray-200 text-gray-900"></td>
              </tr>
              <tr>
                <td class="px-3 py-2 border-t border-gray-200 font-semibold text-gray-600">Blouse piece</td>
                <td id="blousePieceCell" class="px-3 py-2 border-t border-gray-200 text-gray-900"></td>
              </tr>
              <tr>
                <td class="px-3 py-2 border-t border-gray-200 font-semibold text-gray-600">Wash care</td>
                <td id="washCareCell" class="px-3 py-2 border-t border-gray-200 text-gray-900"></td>
              </tr>
              <tr>
                <td class="px-3 py-2 border-t border-gray-200 font-semibold text-gray-600">Occasion</td>
                <td id="occasionCell" class="px-3 py-2 border-t border-gray-200 text-gray-900"></td>
              </tr>
              <tr>
                <td class="px-3 py-2 border-t border-gray-200 font-semibold text-gray-600">Weight</td>
                <td id="weightCell" class="px-3 py-2 border-t border-gray-200 text-gray-900"></td>
              </tr>
              <tr>
                <td class="px-3 py-2 border-t border-gray-200 font-semibold text-gray-600">Delivery time</td>
                <td id="deliveryTimeCell" class="px-3 py-2 border-t border-gray-200 text-gray-900"></td>
              </tr>
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
</section>

<script>
  const params = new URLSearchParams(window.location.search);

  const img = params.get("img");
  const name = params.get("name");
  const price = params.get("price");
  const code = params.get("code");
  const description = params.get("description");
  const type = params.get("type");
  const stock = params.get("stock");
  const fabricType = params.get("fabricType");
  const length = params.get("length");
  const blousePiece = params.get("blousePiece");
  const washCare = params.get("washCare");
  const occasion = params.get("occasion");
  const weight = params.get("weight");
  const deliveryTime = params.get("deliveryTime");

  // SET DATA IN PAGE
  document.getElementById("productImg").src = `images/${type}/${img}`;
  document.getElementById("productName").innerText = name;
  document.getElementById("productType").innerText = type;
  document.getElementById("productPrice").innerText = price;
  document.getElementById("productDescription").innerText = description;
  document.getElementById("productCode").innerText = "CODE: " + code;

  // STOCK BADGE
  if (stock === "false") {
    document.getElementById("stockBadge").innerHTML =
      `<span class="bg-red-600 text-white text-xs px-3 py-1 rounded">OUT OF STOCK</span>`;
  } else {
    document.getElementById("stockBadge").innerHTML =
      `<span class="bg-green-600 text-white text-xs px-3 py-1 rounded">IN STOCK</span>`;
  }

  const setCellValue = (id, value) => {
    document.getElementById(id).innerText = value && value !== "undefined" ? value : "Not specified";
  };

  setCellValue("fabricTypeCell", fabricType);
  setCellValue("lengthCell", length);
  setCellValue("blousePieceCell", blousePiece);
  setCellValue("washCareCell", washCare);
  setCellValue("occasionCell", occasion);
  setCellValue("weightCell", weight);
  setCellValue("deliveryTimeCell", deliveryTime);

  // WHATSAPP BUTTON URL
  const message =
    `Hello SareeKraft üëã%0A` +
    `I want to buy this saree:%0A%0A` +
    `‚ú® Name: ${name}%0A` +
    `üí∞ Price: ${price}%0A` +
    `üè∑Ô∏è Code: ${code}%0A%0A` +
    `üì∏ Image:%0Ahttps://sareekraft.in/images/${type}/${img}%0A%0A` +
    `Please confirm availability.`;

  document.getElementById("whatsappButton").href =
    `https://wa.me/918080674236?text=${message}`;
</script>

</body>
</html>
